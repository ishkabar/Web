{
  "title": "DatabaseFtpSync - ERP Database Synchronization",
  "summary": "Automated database synchronization system between ERP systems via FTP with retry logic and multi-database support.",
  "content": "## Overview\n\nDatabaseFtpSync is a robust synchronization system designed to keep multiple ERP databases in sync through FTP file exchange. The system handles critical business data synchronization between different database engines with comprehensive error handling and recovery mechanisms.\n\n## Features\n\n### Multi-Database Support\n\n- **Firebird** - Primary database engine for legacy ERP systems\n- **PostgreSQL** - Modern relational database support\n- **MySQL** - Cross-platform compatibility\n- **LinqToDB ORM** - Type-safe database access layer\n\n### Synchronization Workflow\n\n1. Export data from source database to CSV/XML files\n2. Upload files to FTP server\n3. Download files from FTP to destination\n4. Import and merge data into target database\n5. Log all operations and handle conflicts\n\n### Reliability Features\n\n- **Retry Logic** - Automatic retry on transient failures\n- **Exponential Backoff** - Progressive delay between retries to avoid overwhelming failed services\n- **Transaction Support** - Atomic operations to prevent partial updates\n- **Conflict Resolution** - Handling of concurrent modifications\n- **Data Validation** - Schema validation before import\n\n## Architecture\n\n### Core Components\n\n- **Sync Engine** - Orchestrates the synchronization process\n- **FTP Client** - Handles file transfer with retry logic\n- **Database Adapters** - Abstract layer for different DB engines\n- **Scheduler** - Configurable sync intervals\n- **Logger** - Comprehensive operation logging\n\n## Tech Stack\n\n- C# / .NET 6-8\n- LinqToDB - Database ORM\n- Docker - Containerized deployment\n- FTP Client - File transfer protocol\n- Serilog - Structured logging\n\n## Challenges\n\n### Critical Data Loss Bug\n\n**Problem:** Race condition caused data to be overwritten during concurrent sync operations\n\n**Solution:** Implemented file locking mechanism and transaction isolation to ensure atomic operations\n\n### Network Instability\n\n**Problem:** FTP transfers would fail on unstable connections, leaving databases in inconsistent state\n\n**Solution:**\n\n- Retry logic with exponential backoff (1s, 2s, 4s, 8s, 16s)\n- Partial file resume support\n- Checksum verification before import\n\n### Database Schema Differences\n\n**Problem:** Different ERP systems use slightly different schemas\n\n**Solution:** Mapping layer that transforms data structure between systems while preserving business logic\n\n## Deployment\n\n- **Docker Container** - Isolated runtime environment\n- **Volume Mounts** - Persistent storage for logs and temporary files\n- **Environment Variables** - Configuration without rebuilding\n- **Health Checks** - Monitoring and automatic restart\n\n## Results\n\n- Synchronizes thousands of records daily across multiple ERP instances\n- 99.9% uptime with automatic recovery\n- Reduced manual data entry errors to near zero\n- Average sync time: under 2 minutes for full database\n\n## Key Learnings\n\n- Importance of idempotent operations in sync systems\n- Exponential backoff is critical for external service dependencies\n- Transaction boundaries must be carefully designed\n- Logging is essential for debugging distributed systems"
}