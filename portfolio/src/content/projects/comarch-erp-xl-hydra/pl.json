{
  "title": "Comarch ERP XL - Rozszerzenia Hydra Framework",
  "summary": "Niestandardowe rozszerzenia i integracje ERP XL z wykorzystaniem frameworku Comarch Hydra - callbacki, integracje API i dostosowania logiki biznesowej dla klientów farmaceutycznych i handlowych.",
  "content": "## Przegląd\n\nEnterprise'owy framework dostosowań ERP XL dla firm farmaceutycznych i sieci handlowych. Opracowane niestandardowe callbacki, przepływy pracy dokumentów oraz integracje z systemami zewnętrznymi przy użyciu Comarch Hydra SDK i XL API.\n\n## Kluczowe Projekty\n\n### System Automatyzacji Dokumentów\n\n- **Niestandardowe callbacki** dla zamówień sprzedaży (ZS), faktur (FS/FZ) i dokumentów magazynowych (WZ/PZ)\n- **Dynamiczne rozszerzenia UI** - przyciski, formularze i logika walidacji wstrzykiwane do standardowych okien ERP\n- **Przetwarzanie wsadowe** - automatyczne zmiany stanów dokumentów, aktualizacje cen i korekty VAT\n- **Walidacja w czasie rzeczywistym** - egzekwowanie reguł biznesowych przed zatwierdzeniem dokumentu\n\n### Integracja Sieci Aptek (OLMED)\n\n- **Parser OSOZ-EDI** - przetwarzanie plików raportowania rządowego dla transakcji farmaceutycznych\n- **Zgodność GIF/NFZ** - automatyczne raportowanie do polskich organów zdrowia\n- **Synchronizacja wieloapteczna** - scentralizowane zapasy i ceny w 9 lokalizacjach\n- **Walidacja recept** - kontrole w czasie rzeczywistym względem baz rządowych\n\n### Integracja Retail DRS (System Kaucji)\n\n- **Śledzenie kaucji butelkowych** - automatyczne kalkulacje VAT i cen dla opakowań zwrotnych\n- **Eksport/import XML** - dwukierunkowa wymiana danych z systemami dostawców DRS\n- **Podział dokumentów** - separacja transakcji kaucyjnych od zwykłej sprzedaży\n- **Raporty uzgodnień** - miesięczne rozliczenia z dostawcami\n\n### Automatyzacja Przetwarzania Płatności\n\n- **Uzgadnianie płatności kartowych** - automatyczne dopasowywanie raportów terminalowych do dokumentów ERP\n- **Integracja Avista** - łącznik API dla bramki płatności\n- **Obsługa wielowalutowa** - automatyczne stosowanie kursów wymiany i księgowanie różnic\n- **Integracja z kasami fiskalnymi** - automatyzacja zamknięć dobowych z raportowaniem różnic\n\n## Architektura Techniczna\n\n### Framework Callbacków\n\nAtrybut SubscribeProcedure dla dostosowań faktur z dynamiczną iniekcją przycisków i obsługą zdarzeń.\n\n### Warstwa Integracji API\n\n- **Wzorzec ModifyShowedDocument** - edycja otwartych dokumentów bez zamykania\n- **Zarządzanie sesjami** - thread-safe dostęp do API z automatycznym czyszczeniem\n- **Obsługa transakcji** - operacje atomowe z możliwością rollbacku\n- **Tryb wsadowy** - wysokowydajne przetwarzanie masowe\n\n### Operacje Bazodanowe\n\n- **Abstrakcja ORM** - LinqToDB dla typowanych zapytań\n- **Procedury składowane** - złożona logika biznesowa w T-SQL\n- **Dynamiczny SQL** - generowane w runtime zapytania dla elastycznego raportowania\n- **Connection pooling** - optymalizowane wzorce dostępu do bazy\n\n## Wyzwania i Rozwiązania\n\n### Optymalizacja Wydajności\n\n**Wyzwanie:** Parsowanie XML powodujące 30-sekundowe opóźnienia na dużych paczkach faktur\n\n**Rozwiązanie:** Przeniesienie przetwarzania do funkcji SQL, redukcja czasu do poniżej 2 sekund\n\n### Bezpieczeństwo Wątkowe\n\n**Wyzwanie:** Eventy callbacków uruchamiane z różnych wątków powodujące race conditions\n\n**Rozwiązanie:** Implementacja wzorca AttachThreadToClarion z odpowiednią synchronizacją\n\n### Limity API\n\n**Wyzwanie:** XL API nie wspiera wszystkich modyfikacji pól dokumentów\n\n**Rozwiązanie:** Podejście hybrydowe - API dla zmian strukturalnych, bezpośredni SQL dla edge cases\n\n### Doświadczenie Użytkownika\n\n**Wyzwanie:** Długotrwałe operacje blokujące UI\n\n**Rozwiązanie:** Wskaźniki postępu, przetwarzanie async i inkrementalne aktualizacje\n\n## Punkty Integracji\n\n- **Comarch ERP XL API** (v20250) - manipulacja dokumentami i logika biznesowa\n- **SQL Server** - schemat bazy CDN z niestandardowymi tabelami i procedurami\n- **Zewnętrzne systemy EDI** - wymiana danych w XML\n- **Bramki płatności** - integracja REST API (Avista, Przelewy24)\n- **Systemy rządowe** - portale raportowania OSOZ, GIF, NFZ\n\n## Stos Technologiczny\n\n- C# / .NET Framework 4.8 - kompatybilność z runtime ERP XL\n- Comarch Hydra SDK - framework callbacków i rozszerzenia UI\n- SQL Server 2019 - backend bazodanowy\n- LinqToDB - ORM dla typowanego dostępu do danych\n- WinForms - niestandardowe okna dialogowe\n- XML/XSLT - transformacje dokumentów\n\n## Dostarczona Wartość\n\n- 24-64 godzinne cykle projektowe - szybki development i wdrożenie\n- 120 PLN/godz stawka partnerska - efektywny kosztowo custom development\n- Wdrożenia zero-downtime - callbacki ładowane bez restartu ERP\n- Zgodność regulacyjna - automatyzacja JPK, VAT-7 i raportowania farmaceutycznego\n- Automatyzacja procesów - eliminacja ręcznego wprowadzania danych i uzgodnień\n\n## Wzorce Kodu\n\n### Architektura Event-Driven\n\nCallbacki z async handlerami zdarzeń dla przetwarzania dokumentów z automatycznym odświeżaniem formularzy.\n\n### Wzorzec Repository\n\nRepository bazodanowe z metodami async dla typowanego pobierania dokumentów używając LinqToDB.\n\n### Metody Rozszerzające\n\nNiestandardowe metody rozszerzające dla ekstrakcji wartości kontrolek ERP i konwersji typów.\n\n## Najważniejsze Osiągnięcia\n\n- **Wdrożenia multi-klienckie** - ta sama baza kodu dostosowana dla 5+ firm\n- **Kontrola wersji** - Git z semantic versioning dla DLL callbacków\n- **Dokumentacja** - kompleksowe komentarze inline i przewodniki techniczne\n- **Łatwość utrzymania** - architektura warstwowa z jasnym rozdziałem odpowiedzialności\n- **Rozszerzalność** - design oparty na pluginach dla łatwego dodawania funkcji"
}